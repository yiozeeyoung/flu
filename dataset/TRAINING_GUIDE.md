# å¤§è§„æ¨¡åˆ†å­åæ ‡é¢„æµ‹è®­ç»ƒé…ç½®æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åŸºç¡€é…ç½®ï¼ˆé€‚åˆå•GPUï¼Œ8GBæ˜¾å­˜ï¼‰
```python
config = {
    'data_dir': 'train_4M_pyg',
    'max_samples': 50000,  # é™åˆ¶5ä¸‡ä¸ªåˆ†å­
    'model_type': 'gcn',
    'hidden_dim': 128,
    'num_layers': 4,
    'batch_size': 16,
    'learning_rate': 1e-4,
    'max_epochs': 100,
    'num_workers': 4,
}
```

### 2. ä¸­ç­‰é…ç½®ï¼ˆé€‚åˆé«˜ç«¯GPUï¼Œ16GBæ˜¾å­˜ï¼‰
```python
config = {
    'data_dir': 'train_4M_pyg',
    'max_samples': 200000,  # 20ä¸‡ä¸ªåˆ†å­
    'model_type': 'gat',
    'hidden_dim': 256,
    'num_layers': 6,
    'batch_size': 32,
    'learning_rate': 1e-4,
    'max_epochs': 150,
    'num_workers': 8,
}
```

### 3. é«˜ç«¯é…ç½®ï¼ˆé€‚åˆæœåŠ¡å™¨çº§GPUï¼Œ32GB+æ˜¾å­˜ï¼‰
```python
config = {
    'data_dir': 'train_4M_pyg',
    'max_samples': None,  # ä½¿ç”¨å…¨éƒ¨æ•°æ®
    'model_type': 'transformer',
    'hidden_dim': 512,
    'num_layers': 12,
    'batch_size': 64,
    'learning_rate': 1e-4,
    'max_epochs': 300,
    'num_workers': 16,
}
```

## ğŸ“Š æ¨¡å‹æ¶æ„é€‰æ‹©

### GCN (Graph Convolutional Network)
- **ä¼˜ç‚¹**: ç®€å•é«˜æ•ˆï¼Œè®­ç»ƒé€Ÿåº¦å¿«
- **é€‚ç”¨**: åŸºç¡€å®éªŒï¼Œèµ„æºæœ‰é™
- **å‚æ•°**: `model_type: 'gcn'`

### GAT (Graph Attention Network) 
- **ä¼˜ç‚¹**: æ³¨æ„åŠ›æœºåˆ¶ï¼Œè¡¨è¾¾èƒ½åŠ›å¼º
- **é€‚ç”¨**: å¹³è¡¡æ€§èƒ½å’Œæ•ˆæœ
- **å‚æ•°**: `model_type: 'gat'`

### Transformer
- **ä¼˜ç‚¹**: æœ€å¼ºè¡¨è¾¾èƒ½åŠ›ï¼ŒSOTAæ€§èƒ½
- **é€‚ç”¨**: é«˜ç«¯ç¡¬ä»¶ï¼Œè¿½æ±‚æœ€ä½³æ•ˆæœ
- **å‚æ•°**: `model_type: 'transformer'`

## ğŸ’¾ å†…å­˜å’Œæ˜¾å­˜ä¼˜åŒ–

### é™ä½æ˜¾å­˜ä½¿ç”¨ï¼š
- å‡å° `batch_size`
- å‡å° `hidden_dim` 
- å‡å°‘ `num_layers`
- è®¾ç½® `max_samples` é™åˆ¶æ•°æ®é‡

### æå‡è®­ç»ƒé€Ÿåº¦ï¼š
- å¢åŠ  `num_workers` (ä½†ä¸è¶…è¿‡CPUæ ¸å¿ƒæ•°)
- ä½¿ç”¨æ›´å¤§çš„ `batch_size`
- å¯ç”¨æ··åˆç²¾åº¦è®­ç»ƒï¼ˆä»£ç ä¸­å¯æ·»åŠ ï¼‰

## ğŸ”„ è®­ç»ƒç­–ç•¥

### å­¦ä¹ ç‡è°ƒåº¦ï¼š
- ä½¿ç”¨ `ReduceLROnPlateau` è‡ªåŠ¨è°ƒæ•´
- åˆå§‹å­¦ä¹ ç‡ `1e-4` é€‚åˆå¤§å¤šæ•°æƒ…å†µ
- å¦‚æœæŸå¤±ä¸‹é™æ…¢ï¼Œå¯å°è¯• `5e-4`

### æ—©åœç­–ç•¥ï¼š
- `patience: 20` è¡¨ç¤º20è½®æ— æ”¹å–„åˆ™åœæ­¢
- é€‚åˆå¤§æ•°æ®é›†ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ

### æ­£åˆ™åŒ–ï¼š
- `weight_decay: 1e-5` æƒé‡è¡°å‡
- Dropout: 0.1 (æ¨¡å‹ä¸­å·²è®¾ç½®)
- æ¢¯åº¦è£å‰ª: max_norm=1.0

## ğŸ“ˆ é¢„æœŸè®­ç»ƒæ—¶é—´

| é…ç½®çº§åˆ« | æ•°æ®é‡ | å•è½®æ—¶é—´ | é¢„è®¡æ€»æ—¶é—´ |
|---------|--------|----------|-----------|
| åŸºç¡€     | 5ä¸‡    | 5åˆ†é’Ÿ    | 8-10å°æ—¶  |
| ä¸­ç­‰     | 20ä¸‡   | 15åˆ†é’Ÿ   | 1-2å¤©     |
| é«˜ç«¯     | å…¨é‡   | 30åˆ†é’Ÿ   | 3-5å¤©     |

## ğŸ¯ æ€§èƒ½æŒ‡æ ‡å‚è€ƒ

| æ¨¡å‹ | éšè—ç»´åº¦ | å±‚æ•° | é¢„æœŸRMSE | å‚æ•°é‡ |
|------|----------|------|----------|--------|
| GCN  | 128      | 4    | 8-12 Ã…   | ~100K  |
| GAT  | 256      | 6    | 6-10 Ã…   | ~500K  |
| Transformer | 512 | 12  | 4-8 Ã…    | ~2M    |

## ğŸ›  æ•…éšœæ’é™¤

### æ˜¾å­˜ä¸è¶³ (CUDA out of memory)ï¼š
```python
# å‡å°batch_size
config['batch_size'] = 8

# æˆ–å‡å°æ¨¡å‹å¤§å°
config['hidden_dim'] = 64
config['num_layers'] = 3
```

### è®­ç»ƒå¤ªæ…¢ï¼š
```python
# å¢åŠ workers
config['num_workers'] = min(8, CPUæ ¸å¿ƒæ•°)

# æˆ–é™åˆ¶æ•°æ®é‡å¿«é€Ÿæµ‹è¯•
config['max_samples'] = 10000
```

### æ¨¡å‹ä¸æ”¶æ•›ï¼š
```python
# è°ƒæ•´å­¦ä¹ ç‡
config['learning_rate'] = 5e-5

# æˆ–å¢åŠ æ­£åˆ™åŒ–
config['weight_decay'] = 1e-4
```

## ğŸ“ ä½¿ç”¨è¯´æ˜

1. **ä¿®æ”¹é…ç½®**: ç¼–è¾‘ `large_scale_coordinate_predictor.py` ä¸­çš„ config å­—å…¸
2. **è¿è¡Œè®­ç»ƒ**: `python large_scale_coordinate_predictor.py`
3. **ç›‘æ§è¿›åº¦**: æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºå’Œç”Ÿæˆçš„å›¾è¡¨
4. **æŸ¥çœ‹ç»“æœ**: è®­ç»ƒå®Œæˆåæ£€æŸ¥è¾“å‡ºç›®å½•ä¸­çš„ç»“æœæ–‡ä»¶

## ğŸ“‚ è¾“å‡ºæ–‡ä»¶è¯´æ˜

- `best_model.pth`: æœ€ä½³æ¨¡å‹æƒé‡
- `training_curves.png`: è®­ç»ƒæ›²çº¿å›¾
- `training_results.json`: è®­ç»ƒç»“æœç»Ÿè®¡
- `checkpoint_epoch_*.pth`: å®šæœŸä¿å­˜çš„æ£€æŸ¥ç‚¹

è®­ç»ƒç»“æœå°†è‡ªåŠ¨ä¿å­˜åœ¨æ—¶é—´æˆ³å‘½åçš„ç›®å½•ä¸­ï¼Œæ–¹ä¾¿ç®¡ç†å¤šæ¬¡å®éªŒã€‚
